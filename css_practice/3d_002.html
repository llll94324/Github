<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>css</title>
	<style>
	ul,li{
		padding: 0px;
		margin: 0px;
		list-style: none;
	}

	.out{
		width: 800px;
		height: 90px;
		margin: 100px auto;
		perspective: 8000px;
		position: relative;
	}
	.box{
		width: 100%;
		height: 100%;
		position: absolute;
		transform-style: preserve-3d;
		transform-origin: 50% 50% 25px;

	}
	.box li{
		position: absolute;
		height: 100%;
		width: 100%;
	}
	.box li:nth-of-type(1){
		height: 50px;
		background: #000;
		top: -50px;
		left: 0;
		transform-origin: bottom;
		transform: rotateX(-90deg);
	}
	.box li:nth-of-type(2){
		width: 50px;
		background: #000;
		top: 0px;
		left: -50px;
		transform-origin: right;
		transform: rotateY(90deg);
	}
	.box li:nth-of-type(3){
		background: url(../task_practice/img/187.jpg) no-repeat;
		top: 0px;
		left: 0;
	}
	.box li:nth-of-type(4){
		width: 50px;
		background: #000;
		top: 0px;
		left: 800px;
		transform-origin: left;
		transform: rotateY(-90deg);
	}
	.box li:nth-of-type(5){
		height: 50px;
		background: #000;
		top: 90;
		left: 0;
		transform-origin: top;
		transform: rotateX(90deg);
	}
	.box li:nth-of-type(6){
		background: url(../task_practice/img/186.jpg) no-repeat;
		top: 0px;
		left: 0;
		transform: translateZ(50px);
	}
	.btn{
		width: 30px;
		height: 30px;
		border-radius: 50%;
		background:#111;
		cursor: pointer;
		position: absolute;
		top:500px;
		left: 300px;
	}
	</style>
</head>

<body style="background-color: #c6c6c6">
	<div class="out">
	</div>
	<div class="btn">
		
	</div>
</body>

<script>
	var out = document.getElementsByClassName("out")[0];
	var btn = document.getElementsByClassName("btn")[0];
	var str = "";
	for (var i = 0; i < 4; i++) {
		str += "<ul class = 'box' style = 'left:0;top:"+i*90+"px;'><li></li><li></li><li style='background-position:0 "+(-i*90)+"px'></li><li></li><li></li><li style='background-position:0 "+(-i*90)+"px'></li></ul>";
	}
	out.innerHTML = str;

	var boxs = document.getElementsByClassName("box");
	
	var angle = 0;

	btn.onclick = function(){
		angle +=180;
		
		for (var i = 0; i < boxs.length; i++) {
			setCSS3(boxs[i],{transition:"all 2s ease "+Math.random()*1+"s"});
			setCSS3(boxs[i],{transform:"rotateY("+angle+"deg)"});
		}
	}

	function setCSS3 (obj,attrObj) {
		for (i in attrObj) {
			var newi = i;
			if(newi.indexOf("-")>0){
				var num = newi.indexOf("-");
				newi.replace(newi.substr(num,2),newi.substr(num+1,1).toUpperCase())
			}
			obj.style[newi] = attrObj[i];
			newi = newi.replace(newi.charAt(0),newi.charAt(0).toUpperCase())
		 	obj.style["webkit"+newi] = attrObj[i];
		 } 
	}
</script>

</html>